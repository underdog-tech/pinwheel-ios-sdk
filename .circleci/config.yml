version: 2.1

jobs:
  build_and_tag:
    macos:
      xcode: 14.2.0

    steps:
      - checkout
      - run: ./scripts/install-aws-mac.sh
      - run: bundle install
      - run:
          name: Update Internal SDK
          command: ./scripts/update-sdk.sh --latest
      - run:
          name: 'Git tag version'
          command: ./scripts/git-tag.sh
      - run:
          name: Cocoapods upload
          command: ./scripts/cocoapods-upload.sh

workflows:
  branch-workflow:
    jobs:
      - build_and_tag:
          context: 'frontend-production'
